generator client { provider = "prisma-client-js" }
datasource db { provider = "postgresql"; url = env("DATABASE_URL") }
model User { id String @id @default(cuid()) email String @unique passwordHash String isEmailVerified Boolean @default(false) roleId Int @default(1) twoFASecret String? sessions Session[] subscriptions Subscription[] payments Payment[] createdAt DateTime @default(now()) updatedAt DateTime @updatedAt }
model Session { id String @id @default(cuid()) user User @relation(fields: [userId], references: [id]) userId String userAgent String? ip String? createdAt DateTime @default(now()) revokedAt DateTime? }
model Subscription { id String @id @default(cuid()) user User @relation(fields: [userId], references: [id]) userId String provider String status String plan String currentPeriodEnd DateTime stripeCustomerId String? stripeSubscriptionId String? createdAt DateTime @default(now()) updatedAt DateTime @updatedAt }
model Payment { id String @id @default(cuid()) user User @relation(fields: [userId], references: [id]) userId String provider String providerRef String? amount Int currency String status String meta Json? createdAt DateTime @default(now()) }
model Sport { id String @id @default(cuid()) code String @unique name String }
model Tour { id String @id @default(cuid()) name String body String }
model Competition { id String @id @default(cuid()) sport Sport @relation(fields: [sportId], references: [id]) sportId String tour Tour? @relation(fields: [tourId], references: [id]) tourId String? name String country String? code String? tier String? isEnabled Boolean @default(true) providerRef String? }
model Season { id String @id @default(cuid()) competition Competition @relation(fields: [competitionId], references: [id]) competitionId String name String year Int? startDate DateTime? endDate DateTime? providerRef String? }
model Team { id String @id @default(cuid()) sport Sport @relation(fields: [sportId], references: [id]) sportId String name String country String? providerRef String? }
model Player { id String @id @default(cuid()) sport Sport @relation(fields: [sportId], references: [id]) sportId String firstName String lastName String nationality String? providerRef String? }
model Event { id String @id @default(cuid()) competition Competition @relation(fields: [competitionId], references: [id]) competitionId String season Season? @relation(fields: [seasonId], references: [id]) seasonId String? startTime DateTime status String homeTeam Team? @relation("HomeTeam", fields: [homeTeamId], references: [id]) homeTeamId String? awayTeam Team? @relation("AwayTeam", fields: [awayTeamId], references: [id]) awayTeamId String? player1 Player? @relation("Player1", fields: [player1Id], references: [id]) player1Id String? player2 Player? @relation("Player2", fields: [player2Id], references: [id]) player2Id String? venue String? providerRef String? }
model Tip { id String @id @default(cuid()) event Event @relation(fields: [eventId], references: [id]) eventId String title String pick String odds Float stake Float analysisMd String publishAt DateTime status String }
model TipResult { id String @id @default(cuid()) tip Tip @relation(fields: [tipId], references: [id]) tipId String result String settledAt DateTime roi Float }
model Audit { id String @id @default(cuid()) actorId String? action String target String? meta Json? createdAt DateTime @default(now()) }
